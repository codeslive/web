<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CROS</title>
</head>

<body>
  <script>
    // jsonp
    // 原理就是通过script 的 src 不受同源策略的限制，可以跨域请求资源 但是只能通过get请求
    // 缺点：只能发送get请求，不安全，不好控制
    // 优点：兼容性好
    // 后端返回的是一个函数 但是这个函数是在前端定义的 它会把值传给这个函数的参数

    // const jsonp = (name) => {
    //   let script = document.createElement('script');
    //   script.src = `http://localhost:3000/api/jsonp?callback=${name}`;
    //   document.body.appendChild(script);
    //   return new Promise((resolve, reject) => {
    //     window[name] = (data) => {
    //       resolve(data);
    //     }
    //   })
    // }
    // jsonp(`callback${new Date().getTime()}`);

    fetch('http://localhost:3000/api/json').then(res => res.json()).then(res => {
      console.log(res);
    })

  </script>
</body>

</html>